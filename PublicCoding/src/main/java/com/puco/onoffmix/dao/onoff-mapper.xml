<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.puco.onoffmix.dao.onoff-mapper">
	<select id="MeetupinfoData" resultType="Meetup">
		SELECT * FROM meetupInfo
	</select>
	
	<select id="LocationNumber" resultType="String" parameterType="int">
		SELECT locationno FROM meetupInfo
		WHERE meetno=#{meetno}
	</select>	
	
		<select id="LocInfo" resultType="Loc" parameterType="int">
		SELECT * FROM Locationinfo
		WHERE tno=#{tno}
	</select>	

	<select id="getTimeTable" resultType="String" parameterType="int">
	SELECT timeno FROM Locationinfo
	WHERE tno = #{tno}
	</select>
	
	
	<select id ="timeInfoData" resultType="String" parameterType="int">
		SELECT time FROM timeInfo
		WHERE tno=#{tno}	
	</select>
	
	<select id="getMinPeople" resultType="int" parameterType="int">
			SELECT maxpeople FROM meetupinfo
		WHERE meetno =#{meetno }	
	</select>
	
  <select id="getJoinedPeople" resultType="int" parameterType="java.util.Map">
		SELECT mno FROM meetupreginfo
		WHERE meetno =#{meetno }	
		AND meetdate =#{meetdate}
		AND meettime =#{meettime }

	</select>
	
		<!-- 추가(예약) -->
	<insert id="studyjoin" parameterType="StudyJoin"> 
		<selectKey keyProperty="rno" resultType="int" order="BEFORE">
			SELECT NVL(MAX(rno)+1,1) as rno FROM meetupreginfo		
		</selectKey>
		INSERT INTO meetupreginfo VALUES(#{rno},#{mno},#{meetno},#{meetdate},#{meettime},0,#{tno})
	</insert>
<!-- 	mypage(출력) -->
	<select id="studyjoinUserAllData" resultType="StudyJoin" parameterType="int">
		SELECT * FROM meetupreginfo
		WHERE mno=#{mno}
	</select>
 	<!-- 추가(예약) -->
	<!--<insert id="reserveInsert" parameterType="Reserve"> 
		<selectKey keyProperty="no" resultType="int" order="BEFORE">
			SELECT NVL(MAX(no)+1,1) as no FROM reserve		
		</selectKey>
		INSERT INTO reserve VALUES(#{no},#{id},#{title},#{theater},#{day},#{time},#{inwon},#{price},0)
	</insert>
	mypage(출력)
	<select id="reserveUserAllData" resultType="Reserve" parameterType="String">
		SELECT * FROM reserve
		WHERE id=#{id}
	</select>
	admin(출력)
	<select id="reserveAdminAllData" resultType="Reserve">
		SELECT * FROM reserve
		WHERE res_check=0
	</select>
	
	승인
	<update id="reserveOkUPdate" parameterType="int">
		UPDATE reserve SET
		res_check=1
		WHERE no=#{no}
	</update> -->
</mapper>